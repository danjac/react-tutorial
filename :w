var React = require('react'),
    Reflux = require('reflux'),
    PostStore = require('../stores/PostStore'),
    actions = require('../actions');


module.exports = React.createClass({

    statics: {
        willTransitionTo: function(transition, params) {
           actions.updatePosts(1); 
        }
    },

    propTypes: {
        posts: React.PropTypes.array
    },

    mixins: [
        Reflux.listenTo(PostStore, 'onUpdate')
    ],

    getInitialState: function() {
        return this.props || PostStore.getDefaultData();
    },

    onUpdate: function(data) {
        this.setState(data);
    },

    render: function() {
        var posts = this.state.posts || [];

        return (
            <ul className="unstyled">
                {posts.map(function(post) {
                    return (
                        <li key={post.id}>{post.title}</li> 
                    );
                })}
            </ul>
        );
    }
});
